Code based on https://github.com/fullstack-lang/gongxsd with manual modifications to make it more Go like.